<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>XIOMA FX â€” Order Monitor (Demo)</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --line2:#d1d5db;
      --blue:#2563eb;
      --blue2:#1d4ed8;
      --chip:#f3f4f6;
      --chipText:#374151;
      --shadow: 0 1px 2px rgba(0,0,0,.04);
      --radius: 10px;
      --radius2: 8px;
      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:var(--bg);
    }
    a{color:inherit; text-decoration:none}
    /* Top nav */
    .topbar{
      height:56px;
      background:var(--card);
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      padding:0 18px;
      gap:18px;
    }
    .brand{
      font-weight:800;
      letter-spacing:.2px;
      color:#0b3bff;
    }
    .menu{display:flex; gap:16px; align-items:center; color:#111827}
    .menu .item{font-weight:600; font-size:14px; color:#111827}
    .menu .item .caret{font-size:12px; color:var(--muted); margin-left:6px}
    .spacer{flex:1}
    .user{
      font-size:14px;
      color:#111827;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .icon-btn{
      width:32px; height:32px;
      border:1px solid var(--line);
      background:#fff;
      border-radius:8px;
      display:grid; place-items:center;
      cursor:pointer;
    }
    .icon{font-size:16px; color:var(--muted)}
    /* Page */
    .page{
      padding:18px;
    }
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }
    .header{
      padding:16px 16px 10px 16px;
      display:flex;
      align-items:flex-start;
      gap:16px;
    }
    .hgroup{display:flex; flex-direction:column; gap:8px}
    .title{
      font-size:18px;
      font-weight:800;
      margin:0;
    }
    .subline{
      display:flex; align-items:center; gap:10px;
      color:var(--muted);
      font-size:13px;
    }
    /* Switch */
    .switch{
      position:relative; width:38px; height:20px;
      background:#d1d5db;
      border-radius:999px;
      cursor:pointer;
      display:inline-block;
      vertical-align:middle;
    }
    .switch::after{
      content:"";
      position:absolute; top:2px; left:2px;
      width:16px; height:16px;
      background:#fff;
      border-radius:999px;
      transition:all .15s ease;
      box-shadow:0 1px 2px rgba(0,0,0,.12);
    }
    .switch.on{background:#60a5fa}
    .switch.on::after{left:20px}
    /* Buttons */
    .btn{
      height:34px;
      padding:0 12px;
      border-radius:8px;
      font-weight:700;
      font-size:13px;
      border:1px solid var(--line2);
      background:#fff;
      color:#111827;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .btn.primary{
      background:var(--blue);
      color:#fff;
      border-color:var(--blue);
    }
    .btn.primary:hover{background:var(--blue2)}
    .btn.ghost{
      color:var(--blue);
      border-color:#bfdbfe;
      background:#eff6ff;
    }
    .btn.danger{
      background:#fee2e2;
      border-color:#fecaca;
      color:#b91c1c;
    }
    .btn.danger:hover{background:#fecaca}
    .btn.toolbar{
      height:32px;
      padding:0 14px;
      border-radius:999px;
      font-size:12px;
    }
    .btn:active{transform:translateY(1px)}
    /* Filters row */
    .filters-panel{
      margin:0 0 12px 0;
      padding:12px 14px 14px 14px;
      border:1px solid var(--line);
      border-radius:12px;
      background:#ffffff;
      box-shadow:0 1px 0 rgba(15,23,42,0.02);
    }
    .toolbar-panel{
      margin:0 0 12px 0;
      padding:12px 14px 12px 14px;
      border:1px solid var(--line);
      border-radius:12px;
      background:#ffffff;
      box-shadow:0 1px 0 rgba(15,23,42,0.02);
    }
    .filters-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:12px;
    }
    /* Filters: split sections (Blotter view) */
    .filters-split-label{
      font-size:12px;
      font-weight:700;
      color:var(--muted);
      margin:0 0 8px 0;
      letter-spacing:0.2px;
    }
    .filters-divider{
      border-top:1px solid var(--line);
      margin:12px 0;
    }
    .active-filters-row{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .active-filters-input{
      background:#f9fafb;
      color:#374151;
      flex:1;
      min-width:260px;
    }
    .toolbar-header{
      display:flex;
      align-items:center;
      gap:8px;
      margin-bottom:10px;
    }
    .section-title{
      font-size:14px;
      font-weight:700;
      color:#374151;
      padding:4px 2px 2px 2px;
      letter-spacing:0.2px;
    }
    .section-subtitle{
      font-size:14px;
      font-weight:500;
      color:#6b7280;
    }
    .filters-grid{
      display:grid;
      grid-template-columns: fit-content(220px) fit-content(260px) fit-content(200px) fit-content(200px) fit-content(220px) auto;
      gap:12px;
      align-items:end;
      justify-content:start;
    }
    .blotter-filters-grid{
      display:grid;
      grid-template-columns: repeat(6, fit-content(240px));
      gap:12px;
      align-items:end;
      justify-content:start;
    }
    .input.with-icon{
      padding-left:30px;
    }
    .field.has-icon{
      position:relative;
    }
    .field-icon{
      position:absolute;
      left:10px;
      bottom:10px;
      color:#9ca3af;
      font-size:14px;
      pointer-events:none;
    }
    .field label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
      font-weight:700;
    }
    .label-with-icon{
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .label-icon{
      font-size:12px;
      line-height:1;
      color:#b45309;
    }
    .input, .select, .chips{
      height:36px;
      border:1px solid var(--line2);
      border-radius:8px;
      background:#fff;
      padding:0 10px;
      font-size:13px;
      outline:none;
      width:100%;
    }
    .input:focus, .select:focus, .chips:focus-within{
      border-color:#93c5fd;
      box-shadow:0 0 0 3px rgba(59,130,246,.15);
    }
    .chips{
      display:flex;
      align-items:center;
      gap:6px;
      padding:4px 6px;
      overflow:hidden;
    }
    .chip{
      background:var(--chip);
      color:var(--chipText);
      border:1px solid var(--line);
      border-radius:999px;
      padding:4px 8px;
      font-size:12px;
      font-weight:700;
      display:inline-flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
    }
    .chip .x{
      width:16px; height:16px;
      border-radius:999px;
      display:grid; place-items:center;
      font-size:12px;
      color:#6b7280;
      cursor:pointer;
    }
    .chip .x:hover{background:#e5e7eb}
    .chips input{
      border:none;
      outline:none;
      font-size:13px;
      min-width:90px;
      flex:1;
    }
    .filter-actions{
      display:flex;
      gap:10px;
      justify-content:flex-end;
      align-items:center;
    }
    .btn.small{height:34px}
    /* Main layout */
    .content{
      border-top:1px solid var(--line);
      display:grid;
      grid-template-columns: 220px 1fr;
      min-height:520px;
    }
    /* When Blotter view is active: sidebar hidden, content full width */
    .content.no-sidebar{
      grid-template-columns: 1fr;
    }
    .main{
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      background:#f3f4f6;
      border-radius:12px;
    }
    .sidebar{
      border-right:1px solid var(--line);
      padding:12px 0;
    }
    .side-title{
      padding:0 14px 10px 14px;
      font-size:14px;
      color:#374151;
      font-weight:700;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    .pair-list{
      max-height:520px;
      overflow:auto;
      padding:0 6px;
    }
    .pair{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:8px 10px;
      margin:2px 6px;
      border-radius:10px;
      cursor:pointer;
      font-size:13px;
      border:1px solid transparent;
    }
    .pair-info{
      display:flex;
      align-items:center;
      gap:8px;
    }
    .pair .bulb{
      width:16px;
      height:16px;
      font-size:11px;
    }
    .pair:hover{background:#f9fafb; border-color:var(--line)}
    .pair.active{background:#eef2ff; border-color:#c7d2fe}
    .pair .code{font-weight:800}
    .pair .count{color:var(--muted); font-variant-numeric:tabular-nums}
    /* Table toolbar */
    .tablebar{
      padding:10px 12px;
      border-radius:12px;
      display:flex;
      align-items:center;
      gap:10px;
      color:var(--muted);
      font-size:13px;
      background:#fff;
    }
    /* Table */
    .table-wrap{
      overflow:auto;
      border:1px solid var(--line);
      border-radius:12px;
      background:#f3f4f6;
    }
    table{
      width:max-content;
      border-collapse:separate;
      border-spacing:0;
      min-width:0;
      font-size:13px;
      table-layout:auto;
    }
    col.col-checkbox{width:28px}
    col.col-captured{width:auto}
    col.col-client{width:auto}
    col.col-valid{width:auto}
    col.col-sell{width:auto}
    col.col-rate{width:auto}
    col.col-touch{width:36px}
    col.col-buy{width:auto}
    col.col-exposure{width:auto}
    col.col-actions{width:36px}
    thead th{
      position:sticky;
      top:0;
      background:#fff;
      z-index:2;
      text-align:left;
      color:#111827;
      font-weight:800;
      border-bottom:1px solid var(--line);
      padding:10px 10px;
      white-space:nowrap;
    }
    thead th,
    tbody td{
      border-right:1px solid var(--line);
    }
    thead th:last-child,
    tbody td:last-child{
      border-right:none;
    }
    tbody td{
      border-bottom:1px solid var(--line);
      padding:10px 10px;
      white-space:nowrap;
      color:#111827;
      vertical-align:middle;
    }
    .orders-table th:nth-child(2),
    .orders-table td:nth-child(2){
      padding-left:6px;
      padding-right:6px;
    }
    thead th,
    tbody td{
      overflow:hidden;
      text-overflow:ellipsis;
    }
    tbody tr{background:#fff}
    tbody tr:hover{background:#fafafa}
    .num{font-variant-numeric:tabular-nums; text-align:right}
    .muted{color:var(--muted)}
    .checkbox{
      width:28px;
      text-align:center;
      padding-left:6px;
      padding-right:6px;
    }
    .fixed-center{
      text-align:center;
    }
    .touch-col{
      width:36px;
      text-align:center;
      padding-left:6px;
      padding-right:6px;
    }
    .touch-col .header-icon{
      font-size:14px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .kebab{
      width:34px;
      text-align:center;
      color:#9ca3af;
      font-weight:900;
      cursor:pointer;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .bulb{
      width:18px; height:18px;
      border-radius:999px;
      display:grid; place-items:center;
      border:1px solid #fcd34d;
      background:#fffbeb;
      color:#b45309;
      font-size:12px;
      font-weight:900;
    }
    .sr-only{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0, 0, 0, 0);
      white-space:nowrap;
      border:0;
    }
    .tooltip-target{
      position:relative;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .tooltip-target::after{
      content:attr(data-tooltip);
      position:absolute;
      bottom:calc(100% + 8px);
      left:50%;
      transform:translateX(-50%);
      background:#f9fafb;
      color:#111827;
      border:1px solid var(--line);
      border-radius:8px;
      padding:6px 10px;
      font-size:12px;
      font-weight:600;
      box-shadow:0 6px 16px rgba(15,23,42,.12);
      white-space:nowrap;
      opacity:0;
      pointer-events:none;
      transition:opacity .15s ease, transform .15s ease;
    }
    .tooltip-target::before{
      content:"";
      position:absolute;
      bottom:calc(100% + 2px);
      left:50%;
      transform:translateX(-50%) rotate(45deg);
      width:8px;
      height:8px;
      background:#f9fafb;
      border:1px solid var(--line);
      border-top:none;
      border-left:none;
      transform:translateX(-50%) rotate(45deg);
      opacity:0;
      transition:opacity .15s ease, transform .15s ease;
    }
    .tooltip-target:hover::after{
      opacity:1;
      transform:translateX(-50%) translateY(-2px);
    }
    .tooltip-target:hover::before{
      opacity:1;
      transform:translateX(-50%) translateY(-2px) rotate(45deg);
    }
    /* Utility */
    .right{margin-left:auto}
    .hidden{display:none !important}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="brand">XIOMA FX</div>
    <nav class="menu">
      <a class="item" href="#">Deals <span class="caret">â–¾</span></a>
      <a class="item" href="#">Rates <span class="caret">â–¾</span></a>
      <a class="item" href="#">Data <span class="caret">â–¾</span></a>
      <a class="item" href="#">Services <span class="caret">â–¾</span></a>
      <a class="item" href="#">Audit</a>
    </nav>
    <div class="spacer"></div>
    <div class="user"></div>
  </div>

  <div class="page">
    <div class="card">
      <div class="header">
        <div class="hgroup">
          <h1 class="title">Order Monitor</h1>
          <div class="subline">
            <span id="toggleAll" class="switch" role="switch" aria-checked="false"></span>
            <span>Switch to Order Blotter</span>
          </div>
        </div>
      </div>

      <div class="content">
        <!-- Left sidebar -->
        <aside class="sidebar" id="currencySidebar">
          <div class="side-title">
            <span class="section-title">Currency Pair</span>
            <span class="icon" title="Refresh">âŸ³</span>
          </div>
          <div class="pair-list" id="pairList">
            <!-- rendered by JS -->
          </div>
        </aside>

        <!-- Table -->
        <section class="main">
          <div id="monitorView">
            <section class="filters-panel" aria-label="Filters">
              <div class="filters-header">
                <span class="section-title">Filters</span>

                <div class="filter-actions">
                  <button class="btn small primary" id="searchBtn">Search</button>
                </div>
              </div>
              <div class="filters-split-label">Search fields</div>
              <div class="filters-grid">
                <div class="field">
                  <label>Capture Date</label>
                  <input id="createDate" class="input" type="date" />
                </div>
                <div class="field has-icon">
                  <label>Client</label>
                  <span class="field-icon">ðŸ”Ž</span>
                  <input id="clientFilter" class="input with-icon" type="text" placeholder="Start typing a client name" autocomplete="off" />
                </div>
                <div class="field">
                  <label>Min Amount</label>
                  <input id="amountMin" class="input" type="text" inputmode="decimal" />
                </div>
                <div class="field">
                  <label><span class="label-with-icon"><span class="label-icon">ðŸ’¡</span>Market Touch</span></label>
                  <select id="marketTouch" class="select">
                    <option value="">All</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>
                <div class="field">
                  <label>Market Exposure</label>
                  <select id="marketExposure" class="select">
                    <option value="">All</option>
                  </select>
                </div>
              </div>
              <div class="filters-divider"></div>

              <div class="filters-split-label">Active filters</div>

              <div class="active-filters-row">
                <input id="monitorActiveFilters"
                       class="input active-filters-input"
                       type="text"
                       readonly
                       value="No filters applied" />
                <button class="btn small" id="resetBtn">Clear all filters</button>
              </div>
            </section>

            <section class="toolbar-panel" aria-label="Order Toolbar">
              <div class="toolbar-header">
                <span class="section-title">Order Toolbar:</span>
                <span class="section-subtitle">actions for selected rows</span>
              </div>
              <div class="tablebar">
                <button class="btn toolbar primary" id="newOrderBtn">ï¼‹ New Order</button>
                <button class="btn toolbar ghost" type="button">Convert to Deal</button>
                <button class="btn toolbar ghost" type="button">Send to NT Pro</button>
                <button class="btn toolbar ghost" type="button">Send to NT Pro 2</button>
                <button class="btn toolbar danger" type="button">Cancel Order</button>
              </div>
            </section>

            <div class="table-wrap">
              <table class="orders-table">
                <colgroup>
                  <col class="col-checkbox" />
                  <col class="col-captured" />
                  <col class="col-client" />
                  <col class="col-valid" />
                  <col class="col-sell" />
                  <col class="col-rate" />
                  <col class="col-touch" />
                  <col class="col-buy" />
                  <col class="col-exposure" />
                  <col class="col-actions" />
                </colgroup>
                <thead>
                  <tr>
                    <th class="checkbox fixed-center"><span class="sr-only">Select</span></th>
                    <th class="fixed-center">Capture Date</th>
                    <th>Client</th>
                    <th class="fixed-center">Valid Till</th>
                    <th class="num">Sell Amount</th>
                    <th class="num">Rate</th>
                    <th class="touch-col">
                      <span class="header-icon tooltip-target" data-tooltip="Market Touch Indicator" aria-hidden="true">ðŸ’¡</span>
                      <span class="sr-only">Market Touch Indicator</span>
                    </th>
                    <th class="num">Buy Amount</th>
                    <th>Market Exposure</th>
                    <th class="kebab"><span class="sr-only">Actions</span></th>
                  </tr>
                </thead>
                <tbody id="tbody">
                  <!-- rows by JS -->
                </tbody>
              </table>
            </div>
          </div>

          <div id="blotterView" class="hidden">
            <section class="filters-panel" aria-label="Blotter Filters">
              <div class="filters-header">
                <span class="section-title">Filters</span>

                <div class="filter-actions">
                  <button class="btn small primary" id="blotterSearchBtn">Search</button>
                </div>
              </div>

              <div class="filters-split-label">Search fields</div>

              <div class="blotter-filters-grid">
                <div class="field">
                  <label>Capture Date</label>
                  <input id="blCaptureDate" class="input" type="date" />
                </div>

                <div class="field">
                  <label>Currency Pair</label>
                  <select id="blPair" class="select">
                    <option value="">All</option>
                  </select>
                </div>

                <div class="field">
                  <label>Created By</label>
                  <select id="blCreatedBy" class="select">
                    <option value="">All</option>
                    <option value="dealer1">dealer1</option>
                    <option value="dealer2">dealer2</option>
                    <option value="some_process1">some_process1</option>
                    <option value="some_process2">some_process2</option>
                  </select>
                </div>

                <div class="field">
                  <label>Client</label>
                  <input id="blClient" class="input" type="text" placeholder="Client containsâ€¦" autocomplete="off" />
                </div>

                <div class="field">
                  <label>INN</label>
                  <input id="blInn" class="input" type="text" placeholder="INN containsâ€¦" autocomplete="off" />
                </div>

                <div class="field">
                  <label>Valid Till</label>
                  <input id="blValidTill" class="input" type="date" />
                </div>

                <div class="field">
                  <label>Amount Min</label>
                  <input id="blAmountMin" class="input" type="text" inputmode="decimal" />
                </div>

                <div class="field">
                  <label>Amount Max</label>
                  <input id="blAmountMax" class="input" type="text" inputmode="decimal" />
                </div>

                <div class="field">
                  <label>Side</label>
                  <select id="blSide" class="select">
                    <option value="">All</option>
                    <option value="buy">buy</option>
                    <option value="sell">sell</option>
                  </select>
                </div>

                <div class="field">
                  <label>Rate Min</label>
                  <input id="blRateMin" class="input" type="text" inputmode="decimal" />
                </div>

                <div class="field">
                  <label>Rate Max</label>
                  <input id="blRateMax" class="input" type="text" inputmode="decimal" />
                </div>

                <div class="field">
                  <label><span class="label-with-icon"><span class="label-icon">ðŸ’¡</span>Market Touch</span></label>
                  <select id="blMarketTouch" class="select">
                    <option value="">All</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                  </select>
                </div>

                <div class="field">
                  <label>Market Exposure</label>
                  <select id="blMarketExposure" class="select">
                    <option value="">All</option>
                  </select>
                </div>

                <div class="field">
                  <label>Status</label>
                  <select id="blStatus" class="select">
                    <option value="">All</option>
                    <option value="New">New</option>
                    <option value="Delegated">Delegated</option>
                    <option value="Execute Pending">Execute Pending</option>
                    <option value="Executed">Executed</option>
                    <option value="Cancelled">Cancelled</option>
                  </select>
                </div>
              </div>

              <div class="filters-divider"></div>

              <div class="filters-split-label">Active filters</div>

              <div class="active-filters-row">
                <input id="blotterActiveFilters"
                       class="input active-filters-input"
                       type="text"
                       readonly
                       value="No filters applied" />
                <button class="btn small" id="blotterResetBtn">Clear all filters</button>
              </div>
            </section>

            <div class="table-wrap">
              <table class="orders-table" id="blotterTable">
                <thead>
                  <tr>
                    <th class="checkbox fixed-center"><span class="sr-only">Select</span></th>
                    <th class="fixed-center">Capture Date</th>
                    <th>Currency Pair</th>
                    <th>Created By</th>
                    <th>Client</th>
                    <th>INN</th>
                    <th class="fixed-center">Valid Till</th>
                    <th class="num">Amount</th>
                    <th>Side</th>
                    <th class="num">Rate</th>
                    <th class="touch-col">
                      <span class="header-icon tooltip-target" data-tooltip="Market Touch Indicator" aria-hidden="true">ðŸ’¡</span>
                      <span class="sr-only">Market Touch Indicator</span>
                    </th>
                    <th>Market Exposure</th>
                    <th>Status</th>
                    <th class="kebab"><span class="sr-only">Actions</span></th>
                  </tr>
                </thead>
                <tbody id="blotterTbody">
                  <!-- rows by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
    // ------- Demo data -------
    const pairCodes = ["USDRUB", "EURRUB", "CNYRUB"];

    const rows = [
      mkRow({pair:"USDRUB", captured:"05.06.2025, 11:15", client:'ÐžÐžÐž "Ð Ð¾Ð¼Ð°ÑˆÐºÐ°"', valid:"06.06.2025, 09:30", sell:null, rate:77.80000, buy:15000000, mt:null, exec:"NT Pro"}),
      mkRow({pair:"USDRUB", captured:"05.06.2025, 10:25", client:'ÐžÐžÐž "ÐœÐ°Ðº"', valid:"06.06.2025, 15:10", sell:4500000, rate:78.50000, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"USDRUB", captured:"05.06.2025, 12:05", client:'ÐžÐžÐž "Ð’Ð°ÑÐ¸Ð»ÐµÐº"', valid:"06.06.2025, 11:45", sell:300000, rate:78.13000, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"USDRUB", captured:"05.06.2025, 10:40", client:'ÐžÐžÐž "ÐšÐ°ÐºÑ‚ÑƒÑ"', valid:"05.06.2025, 16:05", sell:null, rate:77.70000, buy:17000000, mt:null, exec:"NT Pro"}),
      mkRow({pair:"USDRUB", captured:"05.06.2025, 10:05", client:'ÐžÐžÐž "ÐšÐ°ÐºÑ‚ÑƒÑ"', valid:"05.06.2025, 14:20", sell:null, rate:77.65000, buy:30000000, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:43", client:'ÐžÐžÐž "Ð Ð¾Ð¼Ð°ÑˆÐºÐ°"', valid:"06.06.2025, 03:15", sell:null, rate:91.00649, buy:8937869, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:54", client:'ÐžÐžÐž "Ð Ð¾Ð·Ð°"', valid:"05.06.2025, 16:58", sell:null, rate:91.05002, buy:9328452, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:02", client:'ÐžÐžÐž "Ð’ÐµÑ€Ð±ÐµÐ½Ð°"', valid:"06.06.2025, 16:58", sell:null, rate:91.06420, buy:10684847, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:49", client:'ÐžÐžÐž "Ð›Ð¾Ñ‚Ð¾Ñ"', valid:"05.06.2025, 21:35", sell:null, rate:91.13238, buy:19131404, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:34", client:'ÐžÐžÐž "Ð¡Ñ‚Ñ€ÐµÐ»Ð¸Ñ†Ð¸Ñ"', valid:"05.06.2025, 15:27", sell:null, rate:91.17131, buy:16407133, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:19", client:'ÐžÐžÐž "Ð‘Ð°Ñ€Ð²Ð¸Ð½Ð¾Ðº"', valid:"06.06.2025, 06:18", sell:null, rate:91.18182, buy:1680963, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:51", client:'ÐžÐžÐž "Ð˜Ñ€Ð¸Ñ"', valid:"05.06.2025, 18:48", sell:null, rate:91.18865, buy:14563677, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:58", client:'ÐžÐžÐž "Ð“Ð²Ð¾Ð·Ð´Ð¸ÐºÐ°"', valid:"06.06.2025, 12:31", sell:null, rate:91.19684, buy:13609728, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:55", client:'ÐžÐžÐž "ÐœÐ°Ðº"', valid:"06.06.2025, 01:19", sell:null, rate:91.22310, buy:14688301, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:05", client:'ÐžÐžÐž "Ð¤Ð¸Ð°Ð»ÐºÐ°"', valid:"06.06.2025, 07:37", sell:null, rate:91.24965, buy:12801506, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:58", client:'ÐžÐžÐž "Ð›Ð¸Ð»Ð¸Ñ"', valid:"06.06.2025, 06:37", sell:null, rate:91.26462, buy:19261026, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:06", client:'ÐžÐžÐž "Ð¢ÑŽÐ»ÑŒÐ¿Ð°Ð½"', valid:"05.06.2025, 19:15", sell:null, rate:91.27908, buy:3539167, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:55", client:'ÐžÐžÐž "ÐšÐ»ÐµÐ²ÐµÑ€"', valid:"06.06.2025, 05:38", sell:null, rate:91.28574, buy:4785216, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:46", client:'ÐžÐžÐž "ÐÐ°ÑÑ‚ÑƒÑ€Ñ†Ð¸Ñ"', valid:"05.06.2025, 20:01", sell:null, rate:91.30568, buy:5520686, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:32", client:'ÐžÐžÐž "ÐžÑ€Ñ…Ð¸Ð´ÐµÑ"', valid:"05.06.2025, 21:40", sell:null, rate:91.31096, buy:11394238, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:53", client:'ÐžÐžÐž "Ð“Ð»Ð°Ð´Ð¸Ð¾Ð»ÑƒÑ"', valid:"06.06.2025, 02:11", sell:null, rate:91.32531, buy:12020906, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:49", client:'ÐžÐžÐž "ÐÑÑ‚Ñ€Ð°"', valid:"05.06.2025, 13:58", sell:null, rate:91.32927, buy:172322, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:46", client:'ÐžÐžÐž "Ð“Ð¸Ð°Ñ†Ð¸Ð½Ñ‚"', valid:"06.06.2025, 11:54", sell:null, rate:91.34228, buy:8314491, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:16", client:'ÐžÐžÐž "Ð’Ð°ÑÐ¸Ð»ÐµÐº"', valid:"06.06.2025, 16:02", sell:null, rate:91.35730, buy:3670554, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:12", client:'ÐžÐžÐž "Ð“Ð¸Ð°Ñ†Ð¸Ð½Ñ‚"', valid:"05.06.2025, 17:52", sell:null, rate:91.37980, buy:7404829, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:08", client:'ÐžÐžÐž "ÐŸÐ¸Ð¾Ð½"', valid:"05.06.2025, 13:33", sell:null, rate:91.43728, buy:17056909, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:39", client:'ÐžÐžÐž "Ð Ð°Ð½ÑƒÐ½ÐºÑƒÐ»ÑŽÑ"', valid:"05.06.2025, 22:51", sell:null, rate:91.47890, buy:8182309, mt:"bulb", exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:37", client:'ÐžÐžÐž "ÐŸÐ¸Ð¾Ð½"', valid:"06.06.2025, 05:50", sell:null, rate:91.48599, buy:15970338, mt:"bulb", exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:33", client:'ÐžÐžÐž "ÐÐ°Ñ€Ñ†Ð¸ÑÑ"', valid:"06.06.2025, 09:33", sell:1557954, rate:91.52904, buy:null, mt:"bulb", exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:57", client:'ÐžÐžÐž "Ð–Ð°ÑÐ¼Ð¸Ð½"', valid:"06.06.2025, 11:22", sell:2495870, rate:91.53396, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:20", client:'ÐžÐžÐž "Ð¢ÑŽÐ»ÑŒÐ¿Ð°Ð½"', valid:"05.06.2025, 21:01", sell:16387807, rate:91.55695, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:55", client:'ÐžÐžÐž "ÐÐ°Ñ€Ñ†Ð¸ÑÑ"', valid:"05.06.2025, 18:37", sell:8482113, rate:91.55709, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:02", client:'ÐžÐžÐž "ÐšÐ°Ð¼ÐµÐ»Ð¸Ñ"', valid:"06.06.2025, 15:12", sell:2777374, rate:91.57878, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:21", client:'ÐžÐžÐž "Ð“ÐµÑ€Ð±ÐµÑ€Ð°"', valid:"06.06.2025, 06:28", sell:12234457, rate:91.58636, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:59", client:'ÐžÐžÐž "ÐšÐ°Ð»ÐµÐ½Ð´ÑƒÐ»Ð°"', valid:"06.06.2025, 11:56", sell:1976966, rate:91.64857, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:01", client:'ÐžÐžÐž "ÐšÐ¾ÑÐ¼ÐµÑ"', valid:"05.06.2025, 13:22", sell:19840364, rate:91.67617, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:44", client:'ÐžÐžÐž "Ð¡Ð¸Ñ€ÐµÐ½ÑŒ"', valid:"06.06.2025, 03:35", sell:18788132, rate:91.75891, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:27", client:'ÐžÐžÐž "Ð›Ð°Ð²Ð°Ð½Ð´Ð°"', valid:"05.06.2025, 13:51", sell:12145349, rate:91.75985, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:03", client:'ÐžÐžÐž "ÐÑÑ‚Ñ€Ð°"', valid:"05.06.2025, 14:45", sell:15313925, rate:91.76025, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:42", client:'ÐžÐžÐž "ÐšÐ°Ð¼Ð¿Ð°Ð½ÑƒÐ»Ð°"', valid:"05.06.2025, 15:02", sell:15805148, rate:91.76953, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:36", client:'ÐžÐžÐž "Ð¥Ñ€Ð¸Ð·Ð°Ð½Ñ‚ÐµÐ¼Ð°"', valid:"06.06.2025, 03:03", sell:1917683, rate:91.82220, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:54", client:'ÐžÐžÐž "Ð¥Ñ€Ð¸Ð·Ð°Ð½Ñ‚ÐµÐ¼Ð°"', valid:"05.06.2025, 19:57", sell:9434531, rate:91.89842, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:59", client:'ÐžÐžÐž "Ð‘ÑƒÐ·Ð¸Ð½Ð°"', valid:"06.06.2025, 06:51", sell:8418332, rate:91.90297, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:35", client:'ÐžÐžÐž "Ð¦Ð¸ÐºÐ»Ð°Ð¼ÐµÐ½"', valid:"06.06.2025, 10:37", sell:18548347, rate:91.95056, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:45", client:'ÐžÐžÐž "ÐšÐ°Ð¼ÐµÐ»Ð¸Ñ"', valid:"06.06.2025, 01:34", sell:7272169, rate:91.97128, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:43", client:'ÐžÐžÐž "ÐŸÑ€Ð¸Ð¼ÑƒÐ»Ð°"', valid:"06.06.2025, 00:32", sell:3853657, rate:91.97721, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:45", client:'ÐžÐžÐž "Ð¨Ð°Ñ„Ñ€Ð°Ð½"', valid:"05.06.2025, 20:25", sell:14298153, rate:92.05535, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:18", client:'ÐžÐžÐž "Ð¤Ñ€ÐµÐ·Ð¸Ñ"', valid:"06.06.2025, 14:01", sell:4319822, rate:92.06541, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:52", client:'ÐžÐžÐž "Ð›Ð°Ð²Ð°Ð½Ð´Ð°"', valid:"05.06.2025, 17:48", sell:4803737, rate:92.07257, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:44", client:'ÐžÐžÐž "Ð˜Ñ€Ð¸Ñ"', valid:"05.06.2025, 13:43", sell:18385201, rate:92.12249, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:07", client:'ÐžÐžÐž "ÐšÑ€Ð¾ÐºÑƒÑ"', valid:"06.06.2025, 14:15", sell:8916145, rate:92.12274, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:31", client:'ÐžÐžÐž "Ð›Ð¾Ñ‚Ð¾Ñ"', valid:"05.06.2025, 20:54", sell:341284, rate:92.17688, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:28", client:'ÐžÐžÐž "Ð›Ð¸Ð»Ð¸Ñ"', valid:"05.06.2025, 15:39", sell:1166449, rate:92.18099, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:29", client:'ÐžÐžÐž "Ð“Ð¾Ñ€Ñ‚ÐµÐ½Ð·Ð¸Ñ"', valid:"05.06.2025, 16:04", sell:14265337, rate:92.25489, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:19", client:'ÐžÐžÐž "ÐœÑÑ‚Ð°"', valid:"06.06.2025, 12:06", sell:7782011, rate:92.26221, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:26", client:'ÐžÐžÐž "Ð“ÐµÑ€Ð±ÐµÑ€Ð°"', valid:"05.06.2025, 12:18", sell:18239121, rate:92.30429, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:25", client:'ÐžÐžÐž "ÐŸÐ¾Ð´ÑÐ¾Ð»Ð½ÑƒÑ…"', valid:"05.06.2025, 19:11", sell:13375203, rate:92.31088, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:17", client:'ÐžÐžÐž "Ð–Ð°ÑÐ¼Ð¸Ð½"', valid:"06.06.2025, 02:42", sell:18748490, rate:92.39318, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:37", client:'ÐžÐžÐž "ÐœÐ°Ð³Ð½Ð¾Ð»Ð¸Ñ"', valid:"05.06.2025, 19:38", sell:1637611, rate:92.40914, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:57", client:'ÐžÐžÐž "Ð­Ð´ÐµÐ»ÑŒÐ²ÐµÐ¹Ñ"', valid:"06.06.2025, 06:36", sell:6849509, rate:92.51053, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:01", client:'ÐžÐžÐž "Ð“Ð²Ð¾Ð·Ð´Ð¸ÐºÐ°"', valid:"06.06.2025, 13:40", sell:14280586, rate:92.61164, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:20", client:'ÐžÐžÐž "Ð¤Ð¸Ð°Ð»ÐºÐ°"', valid:"06.06.2025, 02:29", sell:18565853, rate:92.61604, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:50", client:'ÐžÐžÐž "ÐžÐ´ÑƒÐ²Ð°Ð½Ñ‡Ð¸Ðº"', valid:"05.06.2025, 23:43", sell:17134339, rate:92.68334, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:18", client:'ÐžÐžÐž "Ð Ð¾Ð·Ð°"', valid:"05.06.2025, 11:28", sell:2477578, rate:92.71927, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:32", client:'ÐžÐžÐž "ÐžÑ€Ñ…Ð¸Ð´ÐµÑ"', valid:"06.06.2025, 16:42", sell:8443522, rate:92.72335, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:31", client:'ÐžÐžÐž "Ð›Ð°Ð½Ð´Ñ‹Ñˆ"', valid:"06.06.2025, 11:21", sell:9053167, rate:92.76958, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:39", client:'ÐžÐžÐž "ÐÐ½ÐµÐ¼Ð¾Ð½Ð°"', valid:"06.06.2025, 04:16", sell:13501657, rate:92.79565, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:27", client:'ÐžÐžÐž "ÐŸÐµÑ‚ÑƒÐ½Ð¸Ñ"', valid:"06.06.2025, 16:49", sell:119189, rate:92.84487, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 10:04", client:'ÐžÐžÐž "ÐœÐ°Ð³Ð½Ð¾Ð»Ð¸Ñ"', valid:"05.06.2025, 13:28", sell:8031579, rate:92.85273, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:46", client:'ÐžÐžÐž "Ð“Ð»Ð°Ð´Ð¸Ð¾Ð»ÑƒÑ"', valid:"05.06.2025, 21:26", sell:15367547, rate:92.85304, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 12:24", client:'ÐžÐžÐž "ÐšÐ¾Ð»Ð¾ÐºÐ¾Ð»ÑŒÑ‡Ð¸Ðº"', valid:"05.06.2025, 21:34", sell:485239, rate:92.94216, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:25", client:'ÐžÐžÐž "ÐÐ»ÑŒÑÑ‚Ñ€Ð¾Ð¼ÐµÑ€Ð¸Ñ"', valid:"06.06.2025, 01:57", sell:12629912, rate:92.99030, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"EURRUB", captured:"05.06.2025, 11:38", client:'ÐžÐžÐž "Ð‘ÐµÐ³Ð¾Ð½Ð¸Ñ"', valid:"05.06.2025, 19:38", sell:4741643, rate:92.99465, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:02", client:'ÐžÐžÐž "Ð Ð¾Ð·Ð°"', valid:"05.06.2025, 12:10", sell:null, rate:11.00250, buy:5500000, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:08", client:'ÐžÐžÐž "Ð›Ð¸Ð»Ð¸Ñ"', valid:"05.06.2025, 16:40", sell:null, rate:11.02500, buy:25000000, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:15", client:'ÐžÐžÐž "Ð¢ÑŽÐ»ÑŒÐ¿Ð°Ð½"', valid:"05.06.2025, 13:55", sell:null, rate:11.04750, buy:1200000, mt:null, exec:"NT Pro"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:22", client:'ÐžÐžÐž "ÐžÑ€Ñ…Ð¸Ð´ÐµÑ"', valid:"06.06.2025, 09:20", sell:null, rate:11.06000, buy:80000000, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:29", client:'ÐžÐžÐž "ÐŸÐ¸Ð¾Ð½"', valid:"05.06.2025, 14:05", sell:null, rate:11.07250, buy:15500000, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:34", client:'ÐžÐžÐž "Ð›Ð°Ð²Ð°Ð½Ð´Ð°"', valid:"06.06.2025, 11:30", sell:null, rate:11.08500, buy:35000000, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:41", client:'ÐžÐžÐž "Ð–Ð°ÑÐ¼Ð¸Ð½"', valid:"05.06.2025, 15:25", sell:null, rate:11.09750, buy:900000, mt:null, exec:"NT Pro"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:47", client:'ÐžÐžÐž "Ð“ÐµÑ€Ð±ÐµÑ€Ð°"', valid:"06.06.2025, 13:15", sell:null, rate:11.11000, buy:60000000, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:53", client:'ÐžÐžÐž "ÐÑÑ‚Ñ€Ð°"', valid:"05.06.2025, 17:00", sell:null, rate:11.12250, buy:12300000, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 10:58", client:'ÐžÐžÐž "Ð¤Ð¸Ð°Ð»ÐºÐ°"', valid:"06.06.2025, 08:40", sell:null, rate:11.13500, buy:22500000, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:05", client:'ÐžÐžÐž "ÐšÐ°Ð¼ÐµÐ»Ð¸Ñ"', valid:"05.06.2025, 12:45", sell:null, rate:11.14000, buy:18000000, mt:null, exec:"NT Pro"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:12", client:'ÐžÐžÐž "Ð“Ð²Ð¾Ð·Ð´Ð¸ÐºÐ°"', valid:"06.06.2025, 16:10", sell:null, rate:11.14250, buy:42000000, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:18", client:'ÐžÐžÐž "Ð¥Ñ€Ð¸Ð·Ð°Ð½Ñ‚ÐµÐ¼Ð°"', valid:"05.06.2025, 18:20", sell:null, rate:11.14500, buy:7000000, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:23", client:'ÐžÐžÐž "Ð˜Ñ€Ð¸Ñ"', valid:"06.06.2025, 10:05", sell:null, rate:11.14750, buy:19500000, mt:"bulb", exec:"NT Pro"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:28", client:'ÐžÐžÐž "Ð›Ð¾Ñ‚Ð¾Ñ"', valid:"06.06.2025, 14:30", sell:30000000, rate:11.15250, buy:null, mt:"bulb", exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:34", client:'ÐžÐžÐž "ÐÐ°Ñ€Ñ†Ð¸ÑÑ"', valid:"05.06.2025, 16:05", sell:8500000, rate:11.16500, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:39", client:'ÐžÐžÐž "Ð“Ð¸Ð°Ñ†Ð¸Ð½Ñ‚"', valid:"06.06.2025, 09:55", sell:55000000, rate:11.17750, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:45", client:'ÐžÐžÐž "ÐšÑ€Ð¾ÐºÑƒÑ"', valid:"05.06.2025, 19:10", sell:14000000, rate:11.19000, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:50", client:'ÐžÐžÐž "ÐŸÐ¾Ð´ÑÐ¾Ð»Ð½ÑƒÑ…"', valid:"06.06.2025, 15:40", sell:26000000, rate:11.20250, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 11:56", client:'ÐžÐžÐž "Ð‘ÐµÐ³Ð¾Ð½Ð¸Ñ"', valid:"06.06.2025, 17:00", sell:100000000, rate:11.21500, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:02", client:'ÐžÐžÐž "ÐšÐ°Ð»ÐµÐ½Ð´ÑƒÐ»Ð°"', valid:"05.06.2025, 16:50", sell:3000000, rate:11.22750, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:07", client:'ÐžÐžÐž "Ð¡Ð¸Ñ€ÐµÐ½ÑŒ"', valid:"06.06.2025, 12:20", sell:48000000, rate:11.24000, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:12", client:'ÐžÐžÐž "ÐœÐ°Ð³Ð½Ð¾Ð»Ð¸Ñ"', valid:"05.06.2025, 18:45", sell:18500000, rate:11.25250, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:18", client:'ÐžÐžÐž "Ð›Ð°Ð½Ð´Ñ‹Ñˆ"', valid:"06.06.2025, 07:25", sell:21000000, rate:11.26500, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:24", client:'ÐžÐžÐž "ÐšÐ¾Ð»Ð¾ÐºÐ¾Ð»ÑŒÑ‡Ð¸Ðº"', valid:"05.06.2025, 15:55", sell:6500000, rate:11.27750, buy:null, mt:null, exec:"None"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:31", client:'ÐžÐžÐž "ÐŸÑ€Ð¸Ð¼ÑƒÐ»Ð°"', valid:"06.06.2025, 11:05", sell:32000000, rate:11.29000, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:37", client:'ÐžÐžÐž "ÐÐ½ÐµÐ¼Ð¾Ð½Ð°"', valid:"05.06.2025, 19:35", sell:16200000, rate:11.29750, buy:null, mt:null, exec:"NT Pro"}),
      mkRow({pair:"CNYRUB", captured:"05.06.2025, 12:44", client:'ÐžÐžÐž "ÐŸÐµÑ‚ÑƒÐ½Ð¸Ñ"', valid:"06.06.2025, 13:50", sell:45000000, rate:11.30000, buy:null, mt:null, exec:"Traders"}),
      mkRow({pair:"USDRUB", captured:"05.06.2025, 12:50", client:'ÐžÐžÐž "ÐžÐ´ÑƒÐ²Ð°Ð½Ñ‡Ð¸Ðº"', valid:"06.06.2025, 16:20", sell:10000000, rate:78.20000, buy:null, mt:null, exec:"Traders"}),
    ];

    function mkRow({pair, captured, client, valid, sell, rate, buy, mt, exec}){
      return { pair, captured, client, valid, sell, rate, buy, mt, exec, id: cryptoRandomId() };
    }

    function cryptoRandomId(){
      // not cryptographic; just demo
      return Math.random().toString(16).slice(2,10);
    }

    // ------- Rendering -------
    const pairListEl = document.getElementById('pairList');
    const tbody = document.getElementById('tbody');
    const blotterTbody = document.getElementById('blotterTbody');
    const clientFilterInput = document.getElementById('clientFilter');
    const amountMinInput = document.getElementById('amountMin');
    const marketTouchSelect = document.getElementById('marketTouch');
    const marketExposureSelect = document.getElementById('marketExposure');
    const monitorActiveFilters = document.getElementById('monitorActiveFilters');
    const blCaptureDate = document.getElementById('blCaptureDate');
    const blPair = document.getElementById('blPair');
    const blCreatedBy = document.getElementById('blCreatedBy');
    const blClient = document.getElementById('blClient');
    const blInn = document.getElementById('blInn');
    const blValidTill = document.getElementById('blValidTill');
    const blAmountMin = document.getElementById('blAmountMin');
    const blAmountMax = document.getElementById('blAmountMax');
    const blSide = document.getElementById('blSide');
    const blRateMin = document.getElementById('blRateMin');
    const blRateMax = document.getElementById('blRateMax');
    const blMarketTouch = document.getElementById('blMarketTouch');
    const blMarketExposure = document.getElementById('blMarketExposure');
    const blStatus = document.getElementById('blStatus');

    const blotterSearchBtn = document.getElementById('blotterSearchBtn');
    const blotterResetBtn = document.getElementById('blotterResetBtn');
    const blotterActiveFilters = document.getElementById('blotterActiveFilters');

    let activePair = pairCodes[0];
    let filtered = [...rows];
    const exposureOptions = [...new Set(rows.map(row => row.exec).filter(Boolean))];

    function getPairsWithCounts(){
      return pairCodes.map(code => ({
        code,
        count: rows.filter(row => row.pair === code).length,
        hasMarketTouch: rows.some(row => row.pair === code && isMarketTouch(row))
      }));
    }

    function renderPairs(){
      pairListEl.innerHTML = "";
      getPairsWithCounts().forEach(p => {
        const el = document.createElement('div');
        el.className = "pair" + (p.code === activePair ? " active" : "");
        el.innerHTML = `
          <span class="pair-info">
            <span class="code">${p.code}</span>
            ${p.hasMarketTouch ? `<span class="bulb tooltip-target" data-tooltip="Market Touch">ðŸ’¡</span>` : ``}
          </span>
          <span class="count">${p.count}</span>
        `;
        el.addEventListener('click', () => {
          activePair = p.code;
          renderPairs();
          applyFilters();
        });
        pairListEl.appendChild(el);
      });
    }

    function renderExposureOptions(){
      exposureOptions.forEach(exposure => {
        const option = document.createElement('option');
        option.value = exposure;
        option.textContent = exposure;
        marketExposureSelect.appendChild(option);
      });
    }

    function initBlotterFilterOptions(){
      // Currency Pair options
      pairCodes.forEach(code => {
        const opt = document.createElement('option');
        opt.value = code;
        opt.textContent = code;
        blPair.appendChild(opt);
      });

      // Market Exposure options
      exposureOptions.forEach(exposure => {
        const opt = document.createElement('option');
        opt.value = exposure;
        opt.textContent = exposure;
        blMarketExposure.appendChild(opt);
      });
    }


    function fmtNum(n){
      if (n === null || n === undefined) return "";
      const s = Math.round(n).toString();
      return s.replace(/\B(?=(\d{3})+(?!\d))/g, " ") + ".00";
    }

    function fmtRate(n, pair){
      if (n === null || n === undefined) return "";
      if (pair === "EURRUB") return n.toFixed(2);
      return n.toFixed(5);
    }

    function updateBlotterActiveFiltersSummary(model){
      if (!blotterActiveFilters) return;

      const parts = [];
      if (model.capDate) parts.push(`Capture Date=${model.capDate}`);
      if (model.pair) parts.push(`Currency Pair=${model.pair}`);
      if (model.createdByNeedle) parts.push(`Created By=${model.createdByNeedle}`);
      if (model.clientNeedleRaw) parts.push(`Client~"${model.clientNeedleRaw}"`);
      if (model.innNeedle) parts.push(`INN~"${model.innNeedle}"`);
      if (model.validDate) parts.push(`Valid Till=${model.validDate}`);

      if (model.amountMin !== null || model.amountMax !== null){
        if (model.amountMin !== null && model.amountMax !== null){
          parts.push(`Amount=${fmtNum(model.amountMin)}..${fmtNum(model.amountMax)}`);
        } else if (model.amountMin !== null){
          parts.push(`Amountâ‰¥${fmtNum(model.amountMin)}`);
        } else {
          parts.push(`Amountâ‰¤${fmtNum(model.amountMax)}`);
        }
      }

      if (model.sideNeedle) parts.push(`Side=${model.sideNeedle}`);

      if (model.rateMin !== null || model.rateMax !== null){
        if (model.rateMin !== null && model.rateMax !== null){
          parts.push(`Rate=${model.rateMin}..${model.rateMax}`);
        } else if (model.rateMin !== null){
          parts.push(`Rateâ‰¥${model.rateMin}`);
        } else {
          parts.push(`Rateâ‰¤${model.rateMax}`);
        }
      }

      if (model.touchNeedle){
        parts.push(`Market Touch=${model.touchNeedle === "yes" ? "Yes" : "No"}`);
      }
      if (model.exposureNeedle) parts.push(`Market Exposure=${model.exposureNeedle}`);
      if (model.statusNeedle) parts.push(`Status=${model.statusNeedle}`);

      const summary = parts.length ? parts.join(" | ") : "No filters applied";
      blotterActiveFilters.value = summary;
      blotterActiveFilters.title = summary;
    }

    function hashString(s){
      let h = 0;
      for (let i = 0; i < s.length; i++){
        h = (h * 31 + s.charCodeAt(i)) >>> 0;
      }
      return h;
    }

    function innForClient(client){
      const h = hashString(client);
      // 10 digits: "77" + 8 digits
      return "77" + String(h % 100000000).padStart(8, "0");
    }

    function createdByForRow(r){
      const candidates = ["dealer1", "dealer2", "some_process1", "some_process2"];
      const h = hashString(`${r.client}|${r.pair}`);
      return candidates[h % candidates.length];
    }

    function statusForRow(r){
      const statuses = ["New", "Delegated", "Execute Pending", "Executed", "Cancelled"];
      const h = hashString(`${r.client}|${r.pair}|${r.captured}|${r.valid}`);
      return statuses[h % statuses.length];
    }

    function getAmountAndSide(r){
      if (r.buy !== null && r.buy !== undefined) return { amount: r.buy, side: "buy" };
      if (r.sell !== null && r.sell !== undefined) return { amount: r.sell, side: "sell" };
      return { amount: null, side: "" };
    }

    function renderBlotterTable(data){
      if (!blotterTbody) return;

      blotterTbody.innerHTML = "";
      const source = data || rows;
      source.forEach(r => {
        const { amount, side } = getAmountAndSide(r);

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="checkbox"><input type="checkbox" /></td>
          <td class="fixed-center">${r.captured}</td>
          <td><strong>${r.pair}</strong></td>
          <td class="muted">${createdByForRow(r)}</td>
          <td>${r.client}</td>
          <td class="muted">${innForClient(r.client)}</td>
          <td class="fixed-center">${r.valid}</td>
          <td class="num">${fmtNum(amount)}</td>
          <td>${side}</td>
          <td class="num">${fmtRate(r.rate, r.pair)}</td>
          <td class="touch-col">
            ${r.mt === "bulb"
              ? `<span class="badge"><span class="bulb tooltip-target" data-tooltip="Market Touch Indicator">ðŸ’¡</span></span>`
              : ``}
          </td>
          <td class="muted">${r.exec}</td>
          <td>${statusForRow(r)}</td>
          <td class="kebab" title="More">â‹®</td>
        `;
        blotterTbody.appendChild(tr);
      });
    }

    function parseAmount(value){
      if (!value) return 0;
      const normalized = value.toString().replace(/[^\d.,]/g, "").replace(",", ".");
      const parsed = Number.parseFloat(normalized);
      return Number.isFinite(parsed) ? parsed : 0;
    }

    function yyyyMmDdToDdMmYyyy(value){
      if (!value) return "";
      const parts = value.split("-");
      if (parts.length !== 3) return "";
      const [y, m, d] = parts;
      return `${d}.${m}.${y}`;
    }

    function parseOptionalNumber(value){
      if (!value || !value.toString().trim()) return null;
      const normalized = value.toString().replace(/[^\d.,-]/g, "").replace(",", ".");
      const parsed = Number.parseFloat(normalized);
      return Number.isFinite(parsed) ? parsed : null;
    }

    function isRowAboveMin(r, minAmount){
      if (!minAmount) return true;
      const sell = r.sell;
      const buy = r.buy;
      const sellOk = sell !== null && sell !== undefined && sell >= minAmount;
      const buyOk = buy !== null && buy !== undefined && buy >= minAmount;
      return sellOk || buyOk;
    }

    function isMarketTouch(r){
      return r.mt === "bulb";
    }

    function renderTable(){
      tbody.innerHTML = "";
      filtered.forEach(r => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="checkbox"><input type="checkbox" /></td>
          <td class="fixed-center">${r.captured}</td>
          <td>${r.client}</td>
          <td>${r.valid}</td>
          <td class="num">${fmtNum(r.sell)}</td>
          <td class="num">${fmtRate(r.rate, r.pair)}</td>
          <td class="touch-col">
            ${r.mt === "bulb" ? `<span class="badge"><span class="bulb tooltip-target" data-tooltip="Market Touch Indicator">ðŸ’¡</span></span>` : ``}
          </td>
          <td class="num">${fmtNum(r.buy)}</td>
          <td class="muted">${r.exec}</td>
          <td class="kebab" title="More">â‹®</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function applyBlotterFilters(){
      const capDate = yyyyMmDdToDdMmYyyy(blCaptureDate.value);
      const pair = blPair.value;
      const createdByNeedle = blCreatedBy.value;

      const clientNeedleRaw = blClient.value.trim();
      const clientNeedle = clientNeedleRaw.toLowerCase();
      const innNeedle = blInn.value.trim();

      const validDate = yyyyMmDdToDdMmYyyy(blValidTill.value);

      const amountMin = parseOptionalNumber(blAmountMin.value);
      const amountMax = parseOptionalNumber(blAmountMax.value);

      const sideNeedle = blSide.value;

      const rateMin = parseOptionalNumber(blRateMin.value);
      const rateMax = parseOptionalNumber(blRateMax.value);

      const touchNeedle = blMarketTouch.value;
      const exposureNeedle = blMarketExposure.value;

      const statusNeedle = blStatus.value;

      updateBlotterActiveFiltersSummary({
        capDate,
        pair,
        createdByNeedle,
        clientNeedleRaw,
        innNeedle,
        validDate,
        amountMin,
        amountMax,
        sideNeedle,
        rateMin,
        rateMax,
        touchNeedle,
        exposureNeedle,
        statusNeedle
      });

      const filteredBlotter = rows.filter(r => {
        const { amount, side } = getAmountAndSide(r);

        const createdBy = createdByForRow(r);
        const inn = innForClient(r.client);
        const status = statusForRow(r);

        const okCapture = !capDate || r.captured.startsWith(capDate);
        const okPair = !pair || r.pair === pair;
        const okCreatedBy = !createdByNeedle || createdBy === createdByNeedle;

        const okClient = !clientNeedle || r.client.toLowerCase().includes(clientNeedle);
        const okInn = !innNeedle || inn.includes(innNeedle);

        const okValid = !validDate || r.valid.startsWith(validDate);

        const okAmountMin = amountMin === null || (amount !== null && amount >= amountMin);
        const okAmountMax = amountMax === null || (amount !== null && amount <= amountMax);

        const okSide = !sideNeedle || side === sideNeedle;

        const okRateMin = rateMin === null || (r.rate !== null && r.rate >= rateMin);
        const okRateMax = rateMax === null || (r.rate !== null && r.rate <= rateMax);

        const okTouch = !touchNeedle
          || (touchNeedle === "yes" && isMarketTouch(r))
          || (touchNeedle === "no" && !isMarketTouch(r));

        const okExposure = !exposureNeedle || r.exec === exposureNeedle;

        const okStatus = !statusNeedle || status === statusNeedle;

        return (
          okCapture &&
          okPair &&
          okCreatedBy &&
          okClient &&
          okInn &&
          okValid &&
          okAmountMin &&
          okAmountMax &&
          okSide &&
          okRateMin &&
          okRateMax &&
          okTouch &&
          okExposure &&
          okStatus
        );
      });

      renderBlotterTable(filteredBlotter);
    }

    function updateMonitorActiveFiltersSummary(){
      if (!monitorActiveFilters) return;

      const parts = [];

      if (activePair) parts.push(`Currency Pair=${activePair}`);

      const clientRaw = clientFilterInput.value.trim();
      if (clientRaw) parts.push(`Client~"${clientRaw}"`);

      const minAmount = parseAmount(amountMinInput.value);
      if (minAmount) parts.push(`Min Amountâ‰¥${fmtNum(minAmount)}`);

      const touch = marketTouchSelect.value;
      if (touch) parts.push(`Market Touch=${touch === "yes" ? "Yes" : "No"}`);

      const exposure = marketExposureSelect.value;
      if (exposure) parts.push(`Market Exposure=${exposure}`);

      const summary = parts.length ? parts.join(" | ") : "No filters applied";
      monitorActiveFilters.value = summary;
      monitorActiveFilters.title = summary;
    }

    // ------- Filters -------
    function applyFilters(){
      if (!activePair) {
        activePair = pairCodes[0];
      }
      const clientNeedle = clientFilterInput.value.trim().toLowerCase();
      const minAmount = parseAmount(amountMinInput.value);
      const marketTouchNeedle = marketTouchSelect.value;
      const exposureNeedle = marketExposureSelect.value;
      filtered = rows.filter(r => {
        const okPair = r.pair === activePair;
        const okClient = !clientNeedle || r.client.toLowerCase().includes(clientNeedle);
        const okAmount = isRowAboveMin(r, minAmount);
        const okTouch = !marketTouchNeedle
          || (marketTouchNeedle === "yes" && isMarketTouch(r))
          || (marketTouchNeedle === "no" && !isMarketTouch(r));
        const okExposure = !exposureNeedle || r.exec === exposureNeedle;
        return okPair && okClient && okAmount && okTouch && okExposure;
      });
      filtered.sort((a, b) => a.rate - b.rate);

      renderPairs();
      renderTable();
      updateMonitorActiveFiltersSummary();
    }

    document.getElementById('searchBtn').addEventListener('click', applyFilters);
    clientFilterInput.addEventListener('input', applyFilters);
    amountMinInput.addEventListener('input', applyFilters);
    marketTouchSelect.addEventListener('change', applyFilters);
    marketExposureSelect.addEventListener('change', applyFilters);
    document.getElementById('resetBtn').addEventListener('click', () => {
      document.getElementById('createDate').value = "";
      clientFilterInput.value = "";
      amountMinInput.value = "";
      marketTouchSelect.value = "";
      marketExposureSelect.value = "";
      applyFilters();
    });

    // ------- Toggle: Switch to Order Blotter -------
    const toggleAll = document.getElementById('toggleAll');
    const contentEl = document.querySelector('.content');
    const currencySidebar = document.getElementById('currencySidebar');
    const monitorView = document.getElementById('monitorView');
    const blotterView = document.getElementById('blotterView');

    function setViewMode(isBlotter){
      // UI switch state
      toggleAll.classList.toggle('on', isBlotter);
      toggleAll.setAttribute('aria-checked', isBlotter ? "true" : "false");

      // Layout: show/hide sidebar + stretch main area
      currencySidebar.classList.toggle('hidden', isBlotter);
      contentEl.classList.toggle('no-sidebar', isBlotter);

      monitorView.classList.toggle('hidden', isBlotter);
      blotterView.classList.toggle('hidden', !isBlotter);

      if (isBlotter) {
        applyBlotterFilters();
      }
    }

    toggleAll.addEventListener('click', () => {
      const isBlotter = !toggleAll.classList.contains('on');
      setViewMode(isBlotter);
    });

    // Init: Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Monitor (switch OFF)
    setViewMode(false);

    // Init
    renderExposureOptions();
    initBlotterFilterOptions();
    applyFilters();

    blotterSearchBtn.addEventListener('click', applyBlotterFilters);
    blotterResetBtn.addEventListener('click', () => {
      blCaptureDate.value = "";
      blPair.value = "";
      blCreatedBy.value = "";
      blClient.value = "";
      blInn.value = "";
      blValidTill.value = "";
      blAmountMin.value = "";
      blAmountMax.value = "";
      blSide.value = "";
      blRateMin.value = "";
      blRateMax.value = "";
      blMarketTouch.value = "";
      blMarketExposure.value = "";
      blStatus.value = "";
      applyBlotterFilters();
    });
  </script>
</body>
</html>
